# 現在のタスク: ゲストギャラリーページのタブインターフェース化

## 📋 タスク概要
ゲスト用ギャラリーページ (`app/(guest)/guest/(main)/gallery/page.tsx`) を、写真が混在しているリスト形式から、**目的別に明確に分離された「タブ切り替えインターフェース」**へ全面的にリファクタリングする。

## 📁 関連ファイル
- **実装ファイル**: `app/(guest)/guest/(main)/gallery/page.tsx`
- **UIコンポーネント**: `components/ui/tabs.tsx`
- **会話履歴**: `/Users/tueno/.cursor/projects/Users-tueno-Documents-guest-link/agent-transcripts/77ff557d-e833-4a44-b756-062873cf1380.txt`

## 🎯 実装要件

### 1. タブ構造の導入
ページ上部に、`shadcn/ui` の `Tabs` コンポーネントを配置します。

#### タブ1: 「新郎新婦より」 (From Couple)
- **デフォルトで選択されるタブ**
- **アイコン**: `<HeartHandshake />` または `<Heart />` (lucide-react)
- **内容**: 新郎新婦がSTEP 1（ウェルカムフォト）やSTEP 2（卓へのサプライズ）で登録した写真のみを表示するグリッド
- **エンプティステート**: 「まだ写真が届いていません。お楽しみに！」

#### タブ2: 「この卓のアルバム」 (Our Table's Album)
- **アイコン**: `<Users />` または `<Camera />` (lucide-react)
- **内容**: この卓のゲスト全員がアップロードした写真を表示するグリッド
- **エンプティステート**: 「まだ写真がありません。最初の1枚を投稿しましょう！」
- **重要**: ここには、以前実装した「写真アップロードボタン（Floating Action Button）」を配置してください

### 2. デザインの調整
- タブの切り替えは、遅延なくスムーズに行われるようにしてください
- 各タブのコンテンツエリアは、スクロールしやすいように適切なパディングと余白を設定してください
- タブのデザインは、ブランドカラー（エメラルドグリーン）をアクセントにし、選択中であることが明確に分かるようにしてください

## ✅ 実装済み項目
- [x] `activeTab` state の追加（デフォルト: `'couple'`）
- [x] `couplePhotos` と `tablePhotos` へのデータ分離
- [x] `getCurrentPhotos()` 関数の実装
- [x] `handleNextImage` / `handlePrevImage` の更新
- [x] `itemsWithAds` useMemo の更新（`activeTab` に依存）

## 🚧 実装中/未実装項目
- [ ] タブUI (`Tabs`, `TabsList`, `TabsTrigger`, `TabsContent`) の統合
- [ ] 写真グリッドを各タブのコンテンツとしてラップ
- [ ] エンプティステートの実装（各タブごと）
- [ ] アップロードボタンを「この卓のアルバム」タブのみに配置
- [ ] タブ切り替えのアニメーションとスタイリング

## 📝 技術的メモ
- ファイルサイズが約1040行と大きいため、段階的な実装が必要
- `photos` 配列への参照をすべて `getCurrentPhotos()` に置き換える必要がある
- ライトボックスのインデックス表示も現在のタブに応じて更新する必要がある

## 🎨 UX設計方針
ゲストが「今、誰のアルバムを見ているのか」を一瞬で理解できるようにします。ネイティブアプリのようなスムーズな操作感を目指してください。

## 📅 最終更新
2024年（会話履歴より）
